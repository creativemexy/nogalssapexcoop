(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{8170:function(e,s,r){Promise.resolve().then(r.bind(r,4383))},9376:function(e,s,r){"use strict";var t=r(5475);r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},4383:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var t=r(7437),a=r(605),n=r(2265),o=r(9376);function d(){var e,s,r,d;let{data:l,update:i}=(0,a.useSession)(),c=(0,o.useRouter)(),[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(""),[w,b]=(0,n.useState)(""),[f,g]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=async e=>{if(e.preventDefault(),m(!0),h(""),b(""),f.newPassword!==f.confirmPassword){b("New passwords do not match"),m(!1);return}if(f.newPassword.length<6){b("New password must be at least 6 characters long"),m(!1);return}try{let e=await fetch("/api/admin/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:f.currentPassword,newPassword:f.newPassword})}),s=await e.json();e.ok?(h("Password changed successfully!"),g({currentPassword:"",newPassword:"",confirmPassword:""})):b(s.error||"Failed to change password")}catch(e){b("An error occurred while changing password")}finally{m(!1)}};return l?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),(0,t.jsx)("button",{onClick:()=>c.back(),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"← Back"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:null===(e=l.user)||void 0===e?void 0:e.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:null===(s=l.user)||void 0===s?void 0:s.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:null===(r=l.user)||void 0===r?void 0:r.role})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Member Since"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(d=l.user)||void 0===d?void 0:d.createdAt)?new Date(l.user.createdAt).toLocaleDateString():"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Change Password"}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),(0,t.jsx)("input",{type:"password",id:"currentPassword",value:f.currentPassword,onChange:e=>g({...f,currentPassword:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,t.jsx)("input",{type:"password",id:"newPassword",value:f.newPassword,onChange:e=>g({...f,newPassword:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",value:f.confirmPassword,onChange:e=>g({...f,confirmPassword:e.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),x&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:x}),w&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:w}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Changing Password...":"Change Password"})]})]})]})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=8170)}),_N_E=e.O()}]);